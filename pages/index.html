<!DOCTYPE html>
<html lng="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Simulador de Economia - Eco Solar</title>
  <link rel="stylesheet" href="../styles/style.css">
</head>
<body>
  <script src="../app/App.js" type="module"></script>
    <div class="container">
      <h1>Simulador de Economia - Eco Solar</h1>
      <div class="card">
        <h2>Insira os dados abaixo para calcular sua economia de energia</h2>
          <form id="simuladorForm">
            <p>
              <label for="bill1">Conta 1 (kWh):</label>
              <input type="number" id="bill1" name="bill1">

              <label for="bill2">Conta 2 (kWh):</label>
              <input type="number" id="bill2" name="bill2">
            </p>
            <p>
              <label for="bill3">Conta 3 (kWh):</label>
              <input type="number" id="bill3" name="bill3">

              <label for="bill4">Conta 4 (kWh):</label>
              <input type="number" id="bill4" name="bill4">
            </p>
            <p>
              <label for="consumption">Consumo Mensal (kWh):</label>
              <span id="consumption"> 0,00</span>
            </p>          
              <button type="button" class="button calculate" onclick="calcularEconomia()">Calcular Economia</button>
          </form>
        <div id="result" class="result">
          <h3 id="resultTitle">Resultado</h3>
            <span id="totalWithoutDiscountLabel">Total sem desconto:</span>
            <span id="totalWithoutDiscount">R$ 0,00</span>
            <span style="margin-left: 20px;" id="totalWithDiscountLabel">Total com desconto:</span>
            <span id="totalWithDiscount">R$ 0,00</span>
            </div>
          <p>
            <strong>
              <span id="savingsLabel">Economia:</span>
              <span id="savings">R$ 0,00</span>
            </strong>
          </p>
        </div>
      </div>

      <a href="../pages/about.html" class="button settings">Configuração
      </a>
      <style>
        .settings {
          position: absolute;
          top: 10px;
          right: 10px;
          text-decoration: none;
          padding: 10px;
        }
      </style>

</div>
    <script>
      function calcularEconomia() {
        const bill1 = parseFloat(document.getElementById('bill1').value) || 0;
        const bill2 = parseFloat(document.getElementById('bill2').value) || 0;
        const bill3 = parseFloat(document.getElementById('bill3').value) || 0;
        const bill4 = parseFloat(document.getElementById('bill4').value) || 0;

        const consumption = bill1 + bill2 + bill3 + bill4;
        document.getElementById('consumption').innerText = ` ${consumption.toFixed(2)}`;

        // Simulação de cálculo de economia
        const rate = localStorage.getItem('rate');
        const discount = localStorage.getItem('discount');

        const totalWithoutDiscount = consumption * rate;
        const totalWithDiscount = totalWithoutDiscount * (1 - discount);
        const savings = totalWithoutDiscount - totalWithDiscount;

        document.getElementById('totalWithoutDiscount').innerText = `R$ ${totalWithoutDiscount.toFixed(2)}`;
        document.getElementById('totalWithDiscount').innerText = `R$ ${totalWithDiscount.toFixed(2)}`;
        document.getElementById('savings').innerText = `R$ ${savings.toFixed(2)}`;
      }
    </script> 
</body>
</html>
