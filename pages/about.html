<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configuração - Eco Solar</title>
    <link rel="stylesheet" href="../styles/style.css">
    <style>
      body {
        background: var(--img-settings);
        background-size: cover;
      }
    </style>
  </head>

  <body>
    <script src="../app/Lng.js" type="module" defer></script>
      <div class="container">
        <h1>Configuração do Sistema - Eco Solar</h1>
        <div class="card">
          <h2>Insira os dados de configuração</h2>
          <form id="configForm">
            <p>
              <label for="theme">Escolha o Tema:</label>
              <select id="theme" name="theme">
                <option value="white">Branco</option>
                <option value="orange">Laranja</option>
                <option value="blue">Azul</option>
              </select>
              <label for="language">Escolha o idioma:</label>
              <select id="language" name="language">
                <option value="pt-BR">Português</option>
                <option value="en-US">Inglês</option>
              </select>
            </p>
            <p>
              <label for="rate">Tarifa ($/kwh):</label>
              <input type="number" id="rate" name="rate" value="1.17" step="0.01" required>
              
              <label for="discount">Desconto (%):</label>
              <input type="number" id="discount" name="discount" value="20" step="1" required>
            
              <button type="button" class="button save" onclick="saveSettings()">Salvar Configuração</button>
            </p>
          </form>
        </div>

        <a href="../pages/index.html" class="button back">Voltar</a>
        <style>
          .back {
          position: absolute;
          top: 10px;
          right: 10px;
          text-decoration: none;
          padding: 10px 15px;
          }
        </style>
      </div>

    <script>
      function saveSettings() { 
        const theme = document.getElementById('theme').value;
        const language = document.getElementById('language').value;
        const rate = document.getElementById('rate').value;
        const discount = document.getElementById('discount').value / 100;

        // Armazenar os valores no localStorage
        localStorage.setItem('theme', theme);
        localStorage.setItem('language', language);
        localStorage.setItem('rate', rate);
        localStorage.setItem('discount', discount);
      }

      // Populate form fields with stored values from localStorage when the page loads
      document.addEventListener('DOMContentLoaded', () => {
        const theme = localStorage.getItem('theme');
        const language = localStorage.getItem('language') || 'pt-BR';
        const rate = localStorage.getItem('rate');
        const discount = localStorage.getItem('discount');

        if (theme) {
          document.getElementById('theme').value = theme;
        }
        if (language) {
          document.getElementById('language').value = language;
        }
        if (rate) {
          document.getElementById('rate').value = parseFloat(rate);
        }
        if (discount) {
          document.getElementById('discount').value = parseFloat(discount) * 100;
        }
      });
    </script>
  </body>
</html>